<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Participatory System Mapper</title>
		<meta charset="utf-8" />
		<meta content="IE=edge" http-equiv="X-UA-Compatible" />
		<meta
			content="height=device-height, user-scalable=no"
			name="viewport"
		/>
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<link href="css/prism.css" rel="stylesheet" />
		<link href="css/cd.css" rel="stylesheet" />
		<link href="css/fa.min.css" rel="stylesheet" />
		<link href="css/vis-network.min.css" rel="stylesheet" />
		<script src="js/modernizr.js"></script>
	</head>

	<body class="container" id="container">
		<header>
			<nav id="navbar">
				<!-- <img src="img/prism-logo.png" alt="PRISM"> -->
				<div class="strapline">Participatory System Mapper</div>
				<div id="version"></div>
				<div class="button-wrapper">
					<div class="buttons" id="buttons">
						<div class="tooltip">
							<button id="addNode">
								<i class="fas fa-plus"></i></button
							><span class="tooltiptext">Add factor</span>
						</div>
						<div class="tooltip right-border">
							<button id="addLink">
								<i class="fas fa-wave-square"></i></button
							><span class="tooltiptext">Add link</span>
						</div>
						<div class="tooltip">
							<button id="undo" class="disabled">
								<i class="fas fa-undo small-button"></i></button
							><span class="tooltiptext">Undo</span>
						</div>
						<div class="tooltip">
							<button id="redo" class="disabled">
								<i class="fas fa-redo small-button"></i></button
							><span class="tooltiptext">Redo</span>
						</div>
						<div class="tooltip right-border">
							<button id="deleteNode">
								<i
									class="fas fa-trash-alt small-button"
								></i></button
							><span class="tooltiptext">Delete selected</span>
						</div>
						<div class="tooltip">
							<button id="share">
								<i class="fas fa-user-friends"></i></button
							><span class="tooltiptext">Share</span>
						</div>
						<div class="tooltip">
							<button id="openFile">
								<i
									class="fas fa-folder-open small-button"
								></i></button
							><span class="tooltiptext">Open network</span>
						</div>
						<div class="tooltip">
							<button id="saveFile">
								<i class="fas fa-save small-button"></i></button
							><span class="tooltiptext">Save network</span>
						</div>
						<div class="dropdown-wrapper">
							<span id="save-dropdown">
								<i class="fa fa-caret-down small-button"></i
							></span>
							<div class="dropdown-content">
								<div class="tooltip">
									<button id="exportCVS">CVS</button>
									<span class="tooltiptext"
										>Save as CVS files</span
									>
								</div>
								<div class="tooltip">
									<button id="exportGML">GML</button>
									<span class="tooltiptext"
										>Save as GML file</span
									>
								</div>
							</div>
						</div>
						<div class="tooltip left-border">
							<button id="panelToggle">
								<i class="fas fa-sliders-h"></i>
							</button>
							<span class="tooltiptext"
								>Show or hide settings</span
							>
						</div>
					</div>
				</div>
			</nav>
		</header>
		<main id="main">
			<div id="popup">
				<span id="popup-operation">Edit factor</span>
				<textarea id="popup-label" placeholder="Label"></textarea>
				<table>
					<tr>
						<td>
							<input
								type="button"
								value="cancel"
								id="popup-cancelButton"
							/>
						</td>
						<td class="right">
							<input
								type="button"
								value="save"
								id="popup-saveButton"
							/>
						</td>
					</tr>
				</table>
			</div>
			<div id="net-pane"></div>
			<div id="underlay">
				<canvas class="drawing-canvas" id="main-canvas"></canvas>
				<canvas class="drawing-canvas" id="temp-canvas"></canvas>
				<div class="toolbox" id="toolbox">
					<div class="tool" id="line">
						<i class="fas fa-minus"></i>
						<div class="triangle-bottomright"></div>
						<span class="tooltiptext">Line</span>
					</div>
					<div class="tool" id="rect">
						<i class="fas fa-vector-square"></i>
						<div class="triangle-bottomright"></div>
						<span class="tooltiptext">Rectangle</span>
					</div>
					<div class="tool" id="text">
						<i class="fas fa-font"></i>
						<div class="triangle-bottomright"></div>
						<span class="tooltiptext">Text</span>
					</div>
					<div class="tool" id="pencil">
						<i class="fas fa-pencil-alt"></i>
						<div class="triangle-bottomright"></div>
						<span class="tooltiptext">Pencil</span>
					</div>
					<div class="tool" id="marker">
						<i class="fas fa-highlighter"></i>
						<div class="triangle-bottomright"></div>
						<span class="tooltiptext">Marker</span>
					</div>
					<div class="tool" id="eraser">
						<i class="fas fa-eraser"></i>
						<div class="triangle-bottomright"></div>
						<span class="tooltiptext">Eraser</span>
					</div>
					<div class="tool" id="image">
						<i class="fas fa-image"></i>
						<span class="tooltiptext">Load image</span>
					</div>
					<div class="tool" id="undo">
						<i class="fas fa-undo-alt"></i>
						<span class="tooltiptext">Undo last shape</span>
					</div>
				</div>
			</div>
		</main>
		<aside class="hide" id="panel">
			<!-- Tabs -->
			<div class="tab" id="tab">
				<button class="tablinks" id="networkButton">Network</button>
				<button class="tablinks" id="nodesButton">Factors</button>
				<button class="tablinks" id="linksButton">Links</button>
			</div>
			<!-- Tab content -->
			<!-- Network tab -->
			<div class="tabcontent hide" id="networkTab">
				<div class="networkGrid">
					<div class="panelRow">
						<div>Auto. layout</div>
						<div class="onoffswitch">
							<input
								type="checkbox"
								name="onoffswitch"
								class="onoffswitch-checkbox"
								id="autolayoutswitch"
							/>
							<label
								class="onoffswitch-label"
								for="autolayoutswitch"
							>
								<span class="onoffswitch-inner"></span>
								<span class="onoffswitch-switch"></span>
							</label>
						</div>
					</div>
					<div class="panelRow">
						<div>Spacing</div>
						<div>
							&nbsp;
							<input
								type="range"
								id="antiGravity"
								min="0"
								max="1000000"
								step="10000"
							/>
						</div>
					</div>
					<div class="panelRow">
						<div>Snap to grid</div>
						<div class="onoffswitch">
							<input
								type="checkbox"
								name="onoffswitch"
								class="onoffswitch-checkbox"
								id="snaptogridswitch"
							/>
							<label
								class="onoffswitch-label"
								for="snaptogridswitch"
							>
								<span class="onoffswitch-inner"></span>
								<span class="onoffswitch-switch"></span>
							</label>
						</div>
					</div>
					<div class="panelRow">
						<div>Link:</div>
						<div>
							<select id="curveSelect">
								<option value="Curved" selected>Curved</option>
								<option value="Straight">Straight</option>
							</select>
						</div>
					</div>
					<div class="panelRow">
						<div>Background:</div>
						<div>
							<input
								type="color"
								value="#ffffff"
								id="netBackColorWell"
							/>
						</div>
					</div>
					<div class="panelRow">
						<div>Show drawing layer</div>
						<div class="onoffswitch">
							<input
								type="checkbox"
								name="onoffswitch"
								class="onoffswitch-checkbox"
								id="drawing"
							/>
							<label class="onoffswitch-label" for="drawing">
								<span class="onoffswitch-inner"></span>
								<span class="onoffswitch-switch"></span>
							</label>
						</div>
					</div>
					<div class="panelRow">
						<div>Show labels</div>
						<div class="onoffswitch">
							<input
								type="checkbox"
								name="onoffswitch"
								class="onoffswitch-checkbox"
								id="showLabelSwitch"
								checked
							/>
							<label
								class="onoffswitch-label"
								for="showLabelSwitch"
							>
								<span class="onoffswitch-inner"></span>
								<span class="onoffswitch-switch"></span>
							</label>
						</div>
					</div>
					<div class="panelRow">
						<div>Show legend</div>
						<div class="onoffswitch">
							<input
								type="checkbox"
								name="onoffswitch"
								class="onoffswitch-checkbox"
								id="showLegendSwitch"
							/>
							<label
								class="onoffswitch-label"
								for="showLegendSwitch"
							>
								<span class="onoffswitch-inner"></span>
								<span class="onoffswitch-switch"></span>
							</label>
						</div>
					</div>
					<div class="panelRow divider">
						<label for="hideAll">Show all</label>
						<input
							type="radio"
							id="hideAll"
							name="hide"
							value="All"
							checked
						/>
					</div>
					<div class="panelRow">
						<label for="oneLink"
							>Show only Factors 1 link away</label
						>
						<input
							type="radio"
							id="oneLink"
							name="hide"
							value="1"
						/>
					</div>
					<div class="panelRow">
						<label for="oneLink"
							>Show only Factors 2 links away</label
						>
						<input
							type="radio"
							id="twoLinks"
							name="hide"
							value="2"
						/>
					</div>
					<div class="panelRow">
						<label for="threeLinks"
							>Show only Factors 3 links away</label
						>
						<input
							type="radio"
							id="threeLinks"
							name="hide"
							value="3"
						/>
					</div>
					<div class="panelRow divider">
						<label for="streamAll">Show all</label>
						<input
							type="radio"
							id="streamAll"
							name="stream"
							value="All"
							checked
						/>
					</div>
					<div class="panelRow">
						<label for="upstream">Show only Factors upstream</label>
						<input
							type="radio"
							id="upstream"
							name="stream"
							value="upstream"
						/>
					</div>
					<div class="panelRow">
						<label for="downstream"
							>Show only Factors downstream</label
						>
						<input
							type="radio"
							id="downstream"
							name="stream"
							value="downstream"
						/>
					</div>
					<div class="panelRow divider">
						<div>Size Factors to:</div>
						<div>
							<select id="sizing">
								<option value="Off" selected>---</option>
								<option value="Inputs">Inputs</option>
								<option value="Outputs">Outputs</option>
								<option value="Leverage">Leverage</option>
								<option value="Centrality">Centrality</option>
							</select>
						</div>
					</div>
				</div>
			</div>
			<!-- Factor tab -->
			<div class="tabcontent hide" id="nodesTab">
				<div class="sampleGrid">
					<div class="sampleNode" id="nodeSample1"></div>
					<div class="sampleNode" id="nodeSample2"></div>
					<div class="sampleNode" id="nodeSample3"></div>
					<div class="sampleNode" id="nodeSample4"></div>
					<div class="sampleNode" id="nodeSample5"></div>
					<div class="sampleNode" id="nodeSample6"></div>
					<div class="sampleNode" id="nodeSample7"></div>
					<div class="sampleNode" id="nodeSample8"></div>
					<div class="sampleNode" id="nodeSample9"></div>
				</div>
				<div class="panelRow centered">
					<button type="button" class="btn" id="allFactors">
						Select all factors
					</button>
				</div>
				<div id="nodeDataPanel">
					<div class="panelRow divider">
						<div>
							<span class="nodeLabel" id="nodeLabel"></span>
						</div>
						<div>
							<label for="fixed">Fix:</label>
							<input type="checkbox" id="fixed" />
						</div>
					</div>
					<div class="panelRow">
						<div>Leverage</div>
						<div id="leverage"></div>
					</div>
					<div class="panelRow">
						<div>Betweenness centrality</div>
						<div id="bc"></div>
					</div>
					<div class="notesWrapper">
						<u>Notes</u>
						<div class="notes" id="nodeNotes"></div>
					</div>
				</div>
			</div>
			<!-- Links Tab -->
			<div class="tabcontent hide" id="linksTab">
				<div class="sampleGrid">
					<div class="sampleLink" id="linkSample1"></div>
					<div class="sampleLink" id="linkSample2"></div>
					<div class="sampleLink" id="linkSample3"></div>
					<div class="sampleLink" id="linkSample4"></div>
					<div class="sampleLink" id="linkSample5"></div>
					<div class="sampleLink" id="linkSample6"></div>
					<div class="sampleLink" id="linkSample7"></div>
					<div class="sampleLink" id="linkSample8"></div>
					<div class="sampleLink" id="linkSample9"></div>
				</div>
				<div class="panelRow centered">
					<button type="button" class="btn" id="allEdges">
						Select all links
					</button>
				</div>
				<div id="edgeDataPanel">
					<div class="panelRow centered divider">
						<div>
							<b><span id="edgeLabel"></span></b>
						</div>
					</div>
					<div class="notesWrapper">
						<u>Notes</u>
						<div class="notes" id="edgeNotes"></div>
					</div>
				</div>
			</div>
		</aside>
		<footer>
			<div id="statusBar">
				<br />
			</div>
			<div id="zoomcontrol">
				Zoom <span id="zoomminus">&ndash;</span>
				<input
					type="range"
					id="zoom"
					min="0.1"
					max="4"
					step="0.1"
				/><span id="zoomplus">+</span>
			</div>
		</footer>
		<!-- sample node edit panel -->
		<div id="editNodeDrawer" class="drawerContent hideDrawer">
			<div class="sampleEditorPanel">
				<div class="nodeHeader">Edit factor style</div>
				<div class="sampleTitleInput">
					Name of style:
					<input name="nodeLabel" />
				</div>
				<div>fill</div>
				<div>border</div>
				<div>font</div>
				<div>
					<input type="color" name="fillColor" />
				</div>
				<div>
					<input type="color" name="borderColor" />
				</div>
				<div>
					<input type="color" name="fontColor" />
				</div>
				<div>
					<select name="shape">
						<option value="">Shape...</option>
						<option value="ellipse">Ellipse</option>
						<option value="circle">Circle</option>
						<option value="box">Rect</option>
						<option value="text">Text</option>
					</select>
				</div>
				<div>
					<select name="borderType">
						<option value="">Type...</option>
						<option value="false">Solid</option>
						<option value="true">Dashed</option>
						<option value="dots">Dotted</option>
						<option value="none">None</option>
					</select>
				</div>
				<div>
					<select name="fontSize">
						<option value="">Size...</option>
						<option value="18">Large</option>
						<option value="14">Normal</option>
						<option value="10">Small</option>
					</select>
				</div>
				<div class="sampleEditorCancel">
					<button id="sampleNodeEditorCancelButton">Cancel</button>
				</div>
				<div class="sampleEditorSubmit">
					<button id="sampleNodeEditorSubmitButton">Save</button>
				</div>
			</div>
		</div>
		<!-- sample link edit panel -->
		<div id="editLinkDrawer" class="drawerContent hideDrawer">
			<div class="linkEditorPanel">
				<div class="linkHeader">Edit link style</div>
				<div class="linkTitleInput">
					Name of style:
					<input name="edgeLabel" />
				</div>
				<div>Link colour</div>
				<div>
					<input type="color" name="lineColor" />
				</div>
				<div>
					<select name="width">
						<option value="">Width...</option>
						<option value="1">Width: 1</option>
						<option value="2">Width: 2</option>
						<option value="4">Width: 4</option>
					</select>
				</div>
				<div>
					<select name="dashes">
						<option value="">Dashes...</option>
						<option value="false">Solid</option>
						<option value="dashes">Dashed</option>
						<option value="dots">Dotted</option>
					</select>
				</div>
				<div>
					<select name="arrows">
						<option value="">Arrows...</option>
						<option value="to">End arrow</option>
						<option value="middle">Middle arrow</option>
						<option value="none">No arrow</option>
					</select>
				</div>
				<div class="linkEditorCancel">
					<button id="sampleLinkEditorCancelButton">Cancel</button>
				</div>
				<div class="linkEditorSubmit">
					<button id="sampleLinkEditorSubmitButton">Save</button>
				</div>
			</div>
		</div>
		<!-- Share model dialog -->
		<div id="shareModal" class="modal">
			<div class="modal-content">
				<div class="modal-header">
					<span class="close">&times;</span>
					<h2>Share the network with other participants</h2>
				</div>
				<div class="modal-body">
					<p>
						To invite others to participate in developing this map,
						send them this link:
					</p>
					<p>
						<input type="text" id="text-to-copy" />
					</p>
					<p>
						<button id="copy-text">Copy to clipboard</button>
						<span class="modal-copied-text" id="copied-text"
							>Copied!</span
						>
					</p>
				</div>
			</div>
		</div>
		<!-- Open file dialog -->
		<input type="file" id="fileInput" style="display: none;" />
		<!-- Chat window -->
		<div class="chatbox-tab" id="chatbox-tab">
			<div class="tooltip">
				<i class="fas fa-comments"></i>
				<span class="tooltiptext" style="margin-left: -120px;"
					>Open chat window</span
				>
			</div>
		</div>
		<div class="chatbox-holder" id="chatbox-holder">
			<div class="chatbox chatbox-hide" id="chatbox">
				<div class="chatbox-top" id="chatbox-top">
					<div class="chat-name">
						My name:
						<div class="tooltip">
							<input type="text" id="chat-name" />
							<span class="tooltiptext"
								>Click to change your nickname</span
							>
						</div>
					</div>
					<div class="chatbox-icons">
						<div class="tooltip">
							<span id="minimize"
								><i class="fas fa-times"></i
							></span>
							<span class="tooltiptext">Close chat window</span>
						</div>
					</div>
				</div>
				<div class="chat-messages" id="chat-messages">
					<!-- Messages stream appears here -->
				</div>
				<div class="chat-input-holder">
					<div class="tooltip">
						<button class="emoji" id="emoji-button">
							&#128512;
						</button>
						<span class="tooltiptext">Add an emoji</span>
					</div>
					<textarea
						class="chat-input"
						id="chat-input"
						placeholder="Your message here..."
					></textarea>
					<button class="message-send" id="send-button">
						<i class="fas fa-paper-plane"></i>
					</button>
				</div>
			</div>
		</div>

		<script src="./js/browsertest.js"></script>
		<script src="./dist/prism.bundle.js"></script>
	</body>
</html>
